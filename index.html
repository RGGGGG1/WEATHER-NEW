<script>
    const apiKey = '020d0acf66c731a155efa04f08d3667e';
    const city = 'Kaliningrad,ru';
    const apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric&lang=ru`;

    async function getWeather() {
        try {
            const response = await fetch(apiUrl);
            const data = await response.json();

            console.log('Ответ API:', data); // Проверяем, что пришло от сервера

            if (data.cod === 200) {
                document.getElementById('temperature').textContent = `${Math.round(data.main.temp)}°C`;
                document.getElementById('wind-speed').textContent = `${data.wind.speed} м/с`;
                document.getElementById('pressure').textContent = `${data.main.pressure} гПа`;

                // Проверка кода иконки
                if (data.weather && data.weather[0] && data.weather[0].icon) {
                    const iconCode = data.weather[0].icon;
                    document.getElementById('weather-icon').src = `https://openweathermap.org/img/wn/${iconCode}.png`;
                } else {
                    console.error('Ошибка: нет данных об иконке погоды');
                }
            } else {
                console.error('Ошибка API:', data.message);
            }
        } catch (error) {
            console.error('Ошибка запроса:', error);
        }
    }

    getWeather();
    setInterval(getWeather, 600000);
</script>
